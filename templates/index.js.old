document.addEventListener('DOMContentLoaded', () => {
    const startButton = document.getElementById('start');
    
    // Initialize RecordRTC
    const recorder = new RecordRTC.StereoAudioRecorder(null, {
        type: 'audio',
        mimeType: 'audio/wav',
        sampleRate: 16000,
        bufferSize: 16384
    });

    startButton.addEventListener('click', () => {
        // Start recording
        recorder.startRecording();

        // Send audio stream to server
        recorder.stream().ondataavailable = function(event) {
            socket.emit('stream_audio', { audio: event.data });
        };
    });
});
